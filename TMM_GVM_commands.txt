

1. specific vw: UPRightSIFTOxford1
*********** SanFran *********************
//extract raw feats-65kVW: -DisIntensityNorm=true 
yarn jar /home/yiran/Desktop/first_step/MapRed_makeRawFeat_VW.jar MyCustomedHaoop.MapRedFunction.MapRed_makeRawFeat_VW -libjars /home/yiran/Desktop/first_step/BoofCV0.9.jar,/home/yiran/Desktop/first_step/EJML_boof0.9.jar,/home/yiran/Desktop/first_step/GeoRegression_boof0.9.jar,/home/yiran/Desktop/first_step/libpja_boof0.9.jar,/home/yiran/Desktop/first_step/metadata-extractor-2.6.4.jar,/home/yiran/Desktop/first_step/xmpcore.jar -DvwCenters=ImageR/BenchMark/SanFrancisco/forVW/SIFT-binTool-UPRightOxford1_SanFranQDPCI_forVW-RFea1000-RPho50k_KMean_VW65k/loop-99/part-r-00000 -DpMatrix=ImageR/HE_ProjectionMatrix128-128 -DHEThreshold=ImageR/BenchMark/SanFrancisco/forVW/SIFT-binTool-UPRightOxford1_SanFranQDPCI_forVW-RFea1000-RPho50k_forHEThr-RFea3000-RPho100k_HEThr128_VW65k_KMloop99/part-r-00000 -DmiddleNode=ImageR/BenchMark/SanFrancisco/forVW/MiddleNode1000_onVW65kUPRightSIFTOxford1_maxLoop200/part-r-00000 -DnodeLink_learned=ImageR/BenchMark/SanFrancisco/forVW/D_SanFranQDPCI-RFea5000-RPho100k_node_vw_links_M1000_VW65kUPRightSIFTOxford1_I200.ArrayList_HashSet -DSelPhotos=ImageR/BenchMark/SanFrancisco/SanFrancisco_querys_transIndex_S_to_S.hashMap  -DtargetFeature=SIFT-binTool-UPRightOxford1 -DBinTool_SIFT=ImageR/forVW/SIFT_Oxford1/Oxford_extract_features.ln -DtargetImgSize=786432 -DisIntensityNorm=true -DmultiAssFlag=true@10@1.2@0.05 ImageR/BenchMark/SanFrancisco/SanFrancisco_inSInd_MFiles/data ImageR/BenchMark/SanFrancisco/feats/SIFTUPRightOxford1_QDPCIVW65k_MA_SanFran_Q 30 100000

yarn jar /home/yiran/Desktop/first_step/MapRed_makeRawFeat_VW.jar MyCustomedHaoop.MapRedFunction.MapRed_makeRawFeat_VW -libjars /home/yiran/Desktop/first_step/BoofCV0.9.jar,/home/yiran/Desktop/first_step/EJML_boof0.9.jar,/home/yiran/Desktop/first_step/GeoRegression_boof0.9.jar,/home/yiran/Desktop/first_step/libpja_boof0.9.jar,/home/yiran/Desktop/first_step/metadata-extractor-2.6.4.jar,/home/yiran/Desktop/first_step/xmpcore.jar -DvwCenters=ImageR/BenchMark/SanFrancisco/forVW/SIFT-binTool-UPRightOxford1_SanFranQDPCI_forVW-RFea1000-RPho50k_KMean_VW65k/loop-99/part-r-00000 -DpMatrix=ImageR/HE_ProjectionMatrix128-128 -DHEThreshold=ImageR/BenchMark/SanFrancisco/forVW/SIFT-binTool-UPRightOxford1_SanFranQDPCI_forVW-RFea1000-RPho50k_forHEThr-RFea3000-RPho100k_HEThr128_VW65k_KMloop99/part-r-00000 -DmiddleNode=ImageR/BenchMark/SanFrancisco/forVW/MiddleNode1000_onVW65kUPRightSIFTOxford1_maxLoop200/part-r-00000 -DnodeLink_learned=ImageR/BenchMark/SanFrancisco/forVW/D_SanFranQDPCI-RFea5000-RPho100k_node_vw_links_M1000_VW65kUPRightSIFTOxford1_I200.ArrayList_HashSet -DSelPhotos=ImageR/BenchMark/SanFrancisco/SanFrancisco_docsPCI_transIndex_S_to_S.hashMap -DtargetFeature=SIFT-binTool-UPRightOxford1 -DBinTool_SIFT=ImageR/forVW/SIFT_Oxford1/Oxford_extract_features.ln -DtargetImgSize=786432 -DisIntensityNorm=true -DmultiAssFlag=false ImageR/BenchMark/SanFrancisco/SanFrancisco_inSInd_MFiles/data ImageR/BenchMark/SanFrancisco/feats/SIFTUPRightOxford1_QDPCIVW65k_SA_SanFran_DPCI 1000 100000

//index-65kVW
yarn jar /home/yiran/Desktop/MapRed_IndexPhotoFeat/MapRed_IndexPhotoFeat.jar SURFVW.MapRed_IndexPhotoFeat -libjars /home/yiran/Desktop/MapRed_IndexPhotoFeat/BoofCV0.9.jar,/home/yiran/Desktop/MapRed_IndexPhotoFeat/EJML_boof0.9.jar,/home/yiran/Desktop/MapRed_IndexPhotoFeat/GeoRegression_boof0.9.jar,/home/yiran/Desktop/MapRed_IndexPhotoFeat/libpja_boof0.9.jar,/home/yiran/Desktop/MapRed_IndexPhotoFeat/jai_core.jar,/home/yiran/Desktop/MapRed_IndexPhotoFeat/jai_codec.jar -Dvw_num=65536  -DtaskLabel=_SanFran_DPCI_QDPCIVW_SIFTUPRightOxford1 ImageR/BenchMark/SanFrancisco/feats/SIFTUPRightOxford1_QDPCIVW65k_SA_SanFran_DPCI  ImageR/BenchMark/SanFrancisco/index/


//build final visual rank
_iniR-BurstIntraInter@46@30_ReR1K_reRHE@46@30_Top1K_1vs1AndHistAndAngle@true@true@true@0.26@0.2@1@0@0@0@0@0@0@0

yarn jar BuildRank.jar BuildRank.MapRed_buildRank -libjars BoofCV0.9.jar,EJML_boof0.9.jar,GeoRegression_boof0.9.jar,libpja_boof0.9.jar,commons-math3-3.2.jar,jai_core.jar,jai_codec.jar -Dmapreduce.task.timeout=600000 -Dvw_num=65536 -DindexPath=ImageR/BenchMark/SanFrancisco/index/ -DASMK_Thr= -DASMK_Alpa= -DHMDistThr=46 	-DHMWeight_deta=30 -DiniR_scheme=_iniR-BurstIntraInter -DisOnlyUseHMDistFor1Vs1=true -Dis1vw1match=true -DisUpRightFeat=true -DHPM_ParaDim=4 -DHPM_level=6 -DhistRotation_binStep=0.26 -DhistScale_binStep=0.2 -DbinScaleRate=1 -DPointDisThr=0 -DbadPariWeight=0 -DweightThr=0 -DlineAngleStep=0 -DlineDistStep=0 -DsameLinePointNumThr=0 -DdocScoreThr=0 -DreRankLength=1000 -DtopRank=1000 -DgroundTrueForReport=ImageR/BenchMark/SanFrancisco/SanFrancisco_groundTruth_onlyPCI_inSInd_corr2014.hashMap -Ds_to_lForReport= -DisConcateTwoList=false -DisDiffTopDocsByVW=true -DisParaQueries=true -DsaveRes=true -DmakeReport=false -DthresholdsForPRCurve="" 50 50 50 ImageR/BenchMark/SanFrancisco/feats/SIFTUPRightOxford1_QDPCIVW65k_MA_SanFran_Q _SanFran_DPCI_QDPCIVW_SIFTUPRightOxford1 ImageR/BenchMark/SanFrancisco/ranks/HR1000 _rankDocMatches 0@0







* SanFra:	yarn jar MapRed_GVM.jar GVM.MapRed_GVM -libjars BoofCV0.9.jar,EJML_boof0.9.jar,GeoRegression_boof0.9.jar,libpja_boof0.9.jar,JSAT_my.jar,lire136.jar -DGVMVariant=GVMcart -DcartoIDs_db=ImageR/BenchMark/SanFrancisco/SanFrancisco_Q-DPCI_cartoIDs_db.intArr -DcartoIDs_Q=ImageR/BenchMark/SanFrancisco/SanFrancisco_Q-DPCI_cartoIDs_q_corr2014.hashSetArr -DgTruths=ImageR/BenchMark/SanFrancisco/SanFrancisco_groundTruth_onlyPCI_inSInd_corr2014.hashMap -DV_ForGTSize=1000 -DevalFlag=DivideQ@1,2,3,5,10@0,1,5,10,20,40,100@0,1,5,10,20,40,100 -DreRankScales=100,200,1000 -DvisScales=1000 -DGVM_matScoThrs=0,2,3,4,5 -DGVM_smooth=5,10 -DGVM_blockGrFeat=0,30,20,10 -DGVM_blockIDF=0,30,20,10 -DisExpan=1vs1,bestDoc,sumDoc -DfreqThrs=1,2,3,4,5,10,20,-1 -DactQNum=803 _65KVWSIFTUPRightOxford1_HD46@30_BurstIntraInter_PGM@0.26@0.2-1000 ImageR/BenchMark/SanFrancisco/ranks/HR1000_SanFran_DPCI_QDPCIVW_SIFTUPRightOxford1_VW65K_iniR-BurstIntraInter@46@30_ReR1K_reRHE@46@30_Top1K_1vs1AndHistAndAngle@true@true@true@0.26@0.2@1@0@0@0@0@0@0@0_rankDocMatches ImageR/BenchMark/SanFrancisco/GVM/ 2000 0


			yarn jar MapRed_GVM.jar GVM.MapRed_GVM -libjars BoofCV0.9.jar,EJML_boof0.9.jar,GeoRegression_boof0.9.jar,libpja_boof0.9.jar,JSAT_my.jar,lire136.jar -DGVMVariant=GVMcart -DcartoIDs_db=ImageR/BenchMark/SanFrancisco/SanFrancisco_Q-DPCI_cartoIDs_db.intArr -DcartoIDs_Q=ImageR/BenchMark/SanFrancisco/SanFrancisco_Q-DPCI_cartoIDs_q_corr2014.hashSetArr -DgTruths=ImageR/BenchMark/SanFrancisco/SanFrancisco_groundTruth_onlyPCI_inSInd_corr2014.hashMap -DV_ForGTSize=1000 -DevalFlag=DivideQ@1,2,3,5,10@0,1,5,10,20,40,100@0,1,5,10,20,40,100 -DreRankScales=1000 -DvisScales=1000 -DGVM_matScoThrs=3,4,5 -DGVM_smooth=5 -DGVM_blockGrFeat=0,30,20,10 -DGVM_blockIDF=0,30,20,10 -DisExpan=1vs1,bestDoc,sumDoc -DfreqThrs=1,2,3,4,5,6,7,8,-1 -DactQNum=803 _65KVWSIFTUPRightOxford1_HD46@30_BurstIntraInter_PGM@0.26@0.2-1000 ImageR/BenchMark/SanFrancisco/ranks/HR1000_SanFran_DPCI_QDPCIVW_SIFTUPRightOxford1_VW65K_iniR-BurstIntraInter@46@30_ReR1K_reRHE@46@30_Top1K_1vs1AndHistAndAngle@true@true@true@0.26@0.2@1@0@0@0@0@0@0@0_rankDocMatches ImageR/BenchMark/SanFrancisco/GVM/ 2000 0


			yarn jar MapRed_GVM.jar GVM.MapRed_GVM -libjars BoofCV0.9.jar,EJML_boof0.9.jar,GeoRegression_boof0.9.jar,libpja_boof0.9.jar,JSAT_my.jar,lire136.jar -DGVMVariant=GVMcart -DcartoIDs_db=ImageR/BenchMark/SanFrancisco/SanFrancisco_Q-DPCI_cartoIDs_db.intArr -DcartoIDs_Q=ImageR/BenchMark/SanFrancisco/SanFrancisco_Q-DPCI_cartoIDs_q_corr2014.hashSetArr -DgTruths=ImageR/BenchMark/SanFrancisco/SanFrancisco_groundTruth_onlyPCI_inSInd_corr2014.hashMap -DV_ForGTSize=1000 -DevalFlag=DivideQ@1,2,3,4,5,6,7,8,9,10@0,1,5,10,20,40,100@0,1,5,10,20,40,100 -DtargetSchemes=_VisNN@4_reRGroup@100@100,_GVR@4_reRGroup@1000@1000,_GVM@4@5@0@30@bestDoc@5_reRGroup@1000@1000,_GVM@4@5@20@10@1vs1@5_reRGroup@1000@1000,_GVM@4@5@0@20@sumDoc@2_reRGroup@1000@1000 -DactQNum=803 _65KVWSIFTUPRightOxford1_HD46@30_BurstIntraInter_PGM@0.26@0.2-1000 ImageR/BenchMark/SanFrancisco/ranks/HR1000_SanFran_DPCI_QDPCIVW_SIFTUPRightOxford1_VW65K_iniR-BurstIntraInter@46@30_ReR1K_reRHE@46@30_Top1K_1vs1AndHistAndAngle@true@true@true@0.26@0.2@1@0@0@0@0@0@0@0_rankDocMatches ImageR/BenchMark/SanFrancisco/GVM/ 2000 0
			
	 
